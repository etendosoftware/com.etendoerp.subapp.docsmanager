var React = require('react');
var stack = require('@react-navigation/stack');
var i18n = require('i18n-js');
var dateFns = require('date-fns');
var reactNative = require('react-native');
var Pdf = require('react-native-pdf');
var Sound = require('react-native-sound');
var RNFS = require('react-native-fs');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);
var i18n__default = /*#__PURE__*/_interopDefaultLegacy(i18n);
var Pdf__default = /*#__PURE__*/_interopDefaultLegacy(Pdf);
var Sound__default = /*#__PURE__*/_interopDefaultLegacy(Sound);
var RNFS__default = /*#__PURE__*/_interopDefaultLegacy(RNFS);

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

var __assign = function() {
    __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
    var e = new Error(message);
    return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};

var Home$2={welcome:"Bienvenido a Etendo",productList:"Lista de productos",newProduct:"Añadir nuevo producto",typeProduct:"Buscador de productos",searchBarcode:"Escanear"};var ProductDetail$1={welcome:"Bienvenido a Etendo",newProduct:"Añade un nuevo producto",editProduct:"Editar producto",products:"Productos",nameExample:"Ej. Lata de atún",searchKeyExample:"Eg. ES/0003",barcode:"Código de barras",searchKey:"Clave de Búsqueda",barcodePlaceholder:"Escribe o escanea el código"};var Table$1={products:"Productos",searchKey:"Clave de Búsqueda",barcode:"Código de Barras",barcodeShort:"Cód. Barras",actions:"Acciones",textEmptyTable:"Aún no has creado ningún registro.",commentEmptyTable:"Empieza añadiendo nuevos registros y se verán aquí."};var Modal$1={messageDelete:"Esta seguro de eliminar el producto?"};var Common$1={save:"Guardar",cancel:"Cancelar",accept:"Aceptar",goBack:"Volver"};var Success$1={saveProduct:"Producto creado correctamente",updateProduct:"Producto editado correctamente",deleteProduct:"Producto borrado correctamente"};var ES = {Home:Home$2,ProductDetail:ProductDetail$1,Table:Table$1,Modal:Modal$1,Common:Common$1,"Error":{product:"Ingrese el nombre del producto",deleteProduct:"Ocurrió un error al eliminar el producto",connection:"Error de conexión a la red"},Success:Success$1};

var Home$1={welcome:"Welcome To Etendo",productList:"Product list",newProduct:"Add new product",typeProduct:"Product finder",searchBarcode:"Scan"};var ProductDetail={welcome:"Bienvenido a Etendo",newProduct:"Add new product",editProduct:"Edit product",products:"Products",nameExample:"Eg. tuna can",searchKeyExample:"Eg. ES/0003",barcode:"Barcode",searchKey:"Search Key",barcodePlaceholder:"Type or scan the code"};var Table={products:"Products",searchKey:"Search Key",barcode:"Barcode",barcodeShort:"Barcode",actions:"Actions",textEmptyTable:"There are no records to display.",commentEmptyTable:"Start adding new records and they will be displayed here."};var Modal={messageDelete:"Are you sure to remove the product?"};var Common={save:"Save",cancel:"Cancel",accept:"Accept",goBack:"Go back"};var Success={saveProduct:"Product successfully created",updateProduct:"Product successfully edited",deleteProduct:"Product successfully deleted"};var EN = {Home:Home$1,ProductDetail:ProductDetail,Table:Table,Modal:Modal,Common:Common,"Error":{product:"Enter the product name",deleteProduct:"An error occurred while deleting the product",connection:"Network connection error"},Success:Success};

var supportedLocales = {
    'en-US': EN,
    'es-ES': ES,
};
var Localization = {
    locale: 'en-US',
};
var fallbackLanguage = 'en-US';
var fallbackDateLocale = dateFns.enUS;
var dateLocales = { enUS: dateFns.enUS, esES: dateFns.esES };
var locale = {
    currentDateLocale: null,
    i18n: i18n__default["default"],
    init: function () {
        i18n__default["default"].locale = 'en-US';
        i18n__default["default"].fallbacks = true;
        i18n__default["default"].defaultLocale = fallbackLanguage;
        i18n__default["default"].translations = supportedLocales;
        if (supportedLocales[Localization.locale]) {
            i18n__default["default"].translations[Localization.locale] =
                supportedLocales[Localization.locale];
            this.currentDateLocale =
                dateLocales[Localization.locale.replace('-', '')] || null;
        }
        else {
            i18n__default["default"].translations[fallbackLanguage] = supportedLocales[fallbackLanguage];
            this.currentDateLocale = fallbackDateLocale;
        }
    },
    t: function (key, params) {
        return i18n__default["default"].t(key, params);
    },
    setCurrentLanguage: function (input) {
        var newLocal = input.replace('_', '-');
        i18n__default["default"].locale = newLocal;
        i18n__default["default"].translations = {};
        if (supportedLocales[newLocal]) {
            i18n__default["default"].translations[newLocal] = supportedLocales[newLocal];
        }
    },
    formatDate: function (date, formatStr) {
        try {
            return dateFns.format(date, formatStr, { locale: this.getDeviceLocaleForDate() });
        }
        catch (error) {
            throw new Error("".concat(error.message, " - Params: Date: ").concat(date, " - Format String: ").concat(formatStr));
        }
    },
    parseISODate: function (date) {
        return dateFns.parseISO(date);
    },
    getDeviceLocale: function () {
        if (supportedLocales[Localization.locale]) {
            return i18n__default["default"].locale;
        }
        else {
            return fallbackLanguage;
        }
    },
    getDeviceLocaleForDate: function () {
        return this.currentDateLocale || fallbackDateLocale;
    },
    formatLanguageUnderscore: function (language, dash) {
        switch (language) {
            case 'en':
            case 'en-US':
            case 'en_US':
                return dash ? 'en-US' : 'en_US';
            case 'es':
            case 'es-ES':
            case 'es_ES':
                return dash ? 'es-ES' : 'es_ES';
            default:
                return dash ? 'en-US' : 'en_US';
        }
    },
    getLanguageName: function (language) {
        var formattedLanguage = this.formatLanguageUnderscore(language, true);
        return supportedLocales[formattedLanguage] ? formattedLanguage : null;
    },
    languageByDefault: function () {
        return this.formatLanguageUnderscore('', true);
    },
};

var Home = function (_a) {
    _a.navigationContainer; var sharedFiles = _a.sharedFiles;
    var _b = React.useState(null), audioPlayer = _b[0], setAudioPlayer = _b[1];
    var _c = React.useState(false), isPlaying = _c[0], setIsPlaying = _c[1];
    var _d = React.useState(''), textContent = _d[0], setTextContent = _d[1];
    React.useEffect(function () {
        // Si hay un archivo de texto, leemos su contenido
        if (sharedFiles && sharedFiles.length > 0) {
            var file = sharedFiles[0]; // Tomamos el primer archivo compartido
            if (file.fileMimeType.startsWith('text/')) {
                RNFS__default["default"].readFile(file.filePath, 'utf8')
                    .then(function (content) {
                    setTextContent(content);
                })
                    .catch(function (error) {
                    console.log('Error al leer el archivo de texto:', error);
                });
            }
        }
        // Cleanup on unmount
        return function () {
            if (audioPlayer) {
                audioPlayer.release();
            }
        };
    }, [sharedFiles]);
    var playAudio = function (filePath) {
        if (audioPlayer) {
            // Resume if already loaded
            audioPlayer.play(function (success) {
                if (success) {
                    console.log('Reproducción completada');
                    setIsPlaying(false);
                }
                else {
                    console.log('Error en la reproducción');
                }
            });
            setIsPlaying(true);
        }
        else {
            // Load and play new audio
            var sound_1 = new Sound__default["default"](filePath, '', function (error) {
                if (error) {
                    console.log('Error al cargar el sonido:', error);
                    return;
                }
                sound_1.play(function (success) {
                    if (success) {
                        console.log('Reproducción completada');
                        setIsPlaying(false);
                    }
                    else {
                        console.log('Error en la reproducción');
                    }
                });
                setIsPlaying(true);
            });
            setAudioPlayer(sound_1);
        }
    };
    var pauseAudio = function () {
        if (audioPlayer) {
            audioPlayer.pause();
            setIsPlaying(false);
        }
    };
    var toggleAudioPlayback = function (filePath) {
        if (isPlaying) {
            pauseAudio();
        }
        else {
            playAudio(filePath);
        }
    };
    var renderFileContent = function (file) {
        if (file.fileMimeType === 'application/pdf') {
            return (React__default["default"].createElement(Pdf__default["default"], { source: { uri: file.filePath }, style: styles.pdf, onError: function (error) {
                    console.log(error);
                } }));
        }
        else if (file.fileMimeType.startsWith('image/')) {
            return (React__default["default"].createElement(reactNative.Image, { source: { uri: file.filePath }, style: styles.image, resizeMode: "contain" }));
        }
        else if (file.fileMimeType.startsWith('audio/')) {
            return (React__default["default"].createElement(reactNative.View, { style: styles.audioContainer },
                React__default["default"].createElement(reactNative.TouchableOpacity, { style: styles.audioButton, onPress: function () { return toggleAudioPlayback(file.filePath); } },
                    React__default["default"].createElement(reactNative.Text, { style: styles.audioButtonText }, isPlaying ? 'Pausar Audio' : 'Reproducir Audio'))));
        }
        else if (file.fileMimeType.startsWith('text/')) {
            return (React__default["default"].createElement(reactNative.ScrollView, { style: styles.textContainer },
                React__default["default"].createElement(reactNative.Text, { style: styles.textContent }, textContent)));
        }
        else {
            return (React__default["default"].createElement(reactNative.View, { style: styles.unsupportedContainer },
                React__default["default"].createElement(reactNative.Text, { style: styles.unsupportedText }, "Tipo de archivo no soportado directamente.")));
        }
    };
    return (React__default["default"].createElement(reactNative.View, { style: styles.container }, sharedFiles && sharedFiles.length > 0 ? (sharedFiles.map(function (file, index) { return (React__default["default"].createElement(reactNative.View, { key: index, style: styles.fileContainer },
        React__default["default"].createElement(reactNative.Text, { style: styles.fileName }, file.fileName),
        renderFileContent(file))); })) : (React__default["default"].createElement(reactNative.View, { style: styles.noFileContainer },
        React__default["default"].createElement(reactNative.Text, { style: styles.noFileText }, "No hay archivos compartidos.")))));
};
var styles = reactNative.StyleSheet.create({
    container: {
        flex: 1,
        backgroundColor: '#f7f7f7',
    },
    fileContainer: {
        flex: 1,
        margin: 10,
        backgroundColor: '#fff',
        borderRadius: 8,
        padding: 10,
        elevation: 3,
    },
    fileName: {
        fontSize: 18,
        fontWeight: 'bold',
        marginBottom: 10,
        color: '#333',
    },
    pdf: {
        flex: 1,
        width: reactNative.Dimensions.get('window').width - 40,
        alignSelf: 'center',
    },
    image: {
        flex: 1,
        width: reactNative.Dimensions.get('window').width - 40,
        height: reactNative.Dimensions.get('window').height / 2,
        alignSelf: 'center',
        borderRadius: 8,
    },
    audioContainer: {
        alignItems: 'center',
        marginTop: 20,
    },
    audioButton: {
        flexDirection: 'row',
        alignItems: 'center',
        backgroundColor: '#3b5998',
        padding: 15,
        borderRadius: 30,
        elevation: 2,
    },
    audioButtonText: {
        color: '#fff',
        marginLeft: 10,
        fontSize: 16,
    },
    textContainer: {
        flex: 1,
        padding: 15,
        backgroundColor: '#eef2f3',
        borderRadius: 8,
    },
    textContent: {
        fontSize: 16,
        lineHeight: 24,
        color: '#333',
    },
    unsupportedContainer: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center',
        padding: 20,
    },
    unsupportedText: {
        fontSize: 16,
        color: 'gray',
        textAlign: 'center',
    },
    noFileContainer: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center',
    },
    noFileText: {
        fontSize: 18,
        color: 'gray',
    },
});

var Stack = stack.createStackNavigator();
var App = function (_a) {
    var language = _a.language, navigationContainer = _a.navigationContainer, dataUser = _a.dataUser, sharedFiles = _a.sharedFiles;
    React.useEffect(function () {
        locale.init();
    }, []);
    React.useEffect(function () {
        locale.setCurrentLanguage(locale.formatLanguageUnderscore(language));
    }, [language]);
    return (React__default["default"].createElement(Stack.Navigator, { initialRouteName: "Home" },
        React__default["default"].createElement(Stack.Screen, { name: "Home", options: { headerShown: false } }, function (props) { return (React__default["default"].createElement(Home, __assign({}, props, { navigationContainer: navigationContainer, dataUser: dataUser, sharedFiles: sharedFiles }))); })));
};

module.exports = App;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXRlbmRvRG9jdW1lbnRzTWFuYWdlci5qcyIsInNvdXJjZXMiOlsiLi4vLi4vc3ViYXBwL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCIuLi8uLi9zcmMvbG9jYWxpemF0aW9uL2xvY2FsZS50cyIsIi4uLy4uL3NyYy9zY3JlZW5zL2hvbWUvaW5kZXgudHN4IiwiLi4vLi4vQXBwLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UsIFN1cHByZXNzZWRFcnJvciwgU3ltYm9sICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2VzRGVjb3JhdGUoY3RvciwgZGVzY3JpcHRvckluLCBkZWNvcmF0b3JzLCBjb250ZXh0SW4sIGluaXRpYWxpemVycywgZXh0cmFJbml0aWFsaXplcnMpIHtcclxuICAgIGZ1bmN0aW9uIGFjY2VwdChmKSB7IGlmIChmICE9PSB2b2lkIDAgJiYgdHlwZW9mIGYgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZ1bmN0aW9uIGV4cGVjdGVkXCIpOyByZXR1cm4gZjsgfVxyXG4gICAgdmFyIGtpbmQgPSBjb250ZXh0SW4ua2luZCwga2V5ID0ga2luZCA9PT0gXCJnZXR0ZXJcIiA/IFwiZ2V0XCIgOiBraW5kID09PSBcInNldHRlclwiID8gXCJzZXRcIiA6IFwidmFsdWVcIjtcclxuICAgIHZhciB0YXJnZXQgPSAhZGVzY3JpcHRvckluICYmIGN0b3IgPyBjb250ZXh0SW5bXCJzdGF0aWNcIl0gPyBjdG9yIDogY3Rvci5wcm90b3R5cGUgOiBudWxsO1xyXG4gICAgdmFyIGRlc2NyaXB0b3IgPSBkZXNjcmlwdG9ySW4gfHwgKHRhcmdldCA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBjb250ZXh0SW4ubmFtZSkgOiB7fSk7XHJcbiAgICB2YXIgXywgZG9uZSA9IGZhbHNlO1xyXG4gICAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICB2YXIgY29udGV4dCA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluKSBjb250ZXh0W3BdID0gcCA9PT0gXCJhY2Nlc3NcIiA/IHt9IDogY29udGV4dEluW3BdO1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluLmFjY2VzcykgY29udGV4dC5hY2Nlc3NbcF0gPSBjb250ZXh0SW4uYWNjZXNzW3BdO1xyXG4gICAgICAgIGNvbnRleHQuYWRkSW5pdGlhbGl6ZXIgPSBmdW5jdGlvbiAoZikgeyBpZiAoZG9uZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgaW5pdGlhbGl6ZXJzIGFmdGVyIGRlY29yYXRpb24gaGFzIGNvbXBsZXRlZFwiKTsgZXh0cmFJbml0aWFsaXplcnMucHVzaChhY2NlcHQoZiB8fCBudWxsKSk7IH07XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9ICgwLCBkZWNvcmF0b3JzW2ldKShraW5kID09PSBcImFjY2Vzc29yXCIgPyB7IGdldDogZGVzY3JpcHRvci5nZXQsIHNldDogZGVzY3JpcHRvci5zZXQgfSA6IGRlc2NyaXB0b3Jba2V5XSwgY29udGV4dCk7XHJcbiAgICAgICAgaWYgKGtpbmQgPT09IFwiYWNjZXNzb3JcIikge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHR5cGVvZiByZXN1bHQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5nZXQpKSBkZXNjcmlwdG9yLmdldCA9IF87XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5zZXQpKSBkZXNjcmlwdG9yLnNldCA9IF87XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5pbml0KSkgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKF8gPSBhY2NlcHQocmVzdWx0KSkge1xyXG4gICAgICAgICAgICBpZiAoa2luZCA9PT0gXCJmaWVsZFwiKSBpbml0aWFsaXplcnMudW5zaGlmdChfKTtcclxuICAgICAgICAgICAgZWxzZSBkZXNjcmlwdG9yW2tleV0gPSBfO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0YXJnZXQpIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGNvbnRleHRJbi5uYW1lLCBkZXNjcmlwdG9yKTtcclxuICAgIGRvbmUgPSB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcnVuSW5pdGlhbGl6ZXJzKHRoaXNBcmcsIGluaXRpYWxpemVycywgdmFsdWUpIHtcclxuICAgIHZhciB1c2VWYWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0aWFsaXplcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YWx1ZSA9IHVzZVZhbHVlID8gaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZywgdmFsdWUpIDogaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXNlVmFsdWUgPyB2YWx1ZSA6IHZvaWQgMDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Byb3BLZXkoeCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB4ID09PSBcInN5bWJvbFwiID8geCA6IFwiXCIuY29uY2F0KHgpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc2V0RnVuY3Rpb25OYW1lKGYsIG5hbWUsIHByZWZpeCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN5bWJvbFwiKSBuYW1lID0gbmFtZS5kZXNjcmlwdGlvbiA/IFwiW1wiLmNvbmNhdChuYW1lLmRlc2NyaXB0aW9uLCBcIl1cIikgOiBcIlwiO1xyXG4gICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCBcIm5hbWVcIiwgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiBwcmVmaXggPyBcIlwiLmNvbmNhdChwcmVmaXgsIFwiIFwiLCBuYW1lKSA6IG5hbWUgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XHJcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xyXG4gICAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgcCkpIF9fY3JlYXRlQmluZGluZyhvLCBtLCBwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBmYWxzZSB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRJbihzdGF0ZSwgcmVjZWl2ZXIpIHtcclxuICAgIGlmIChyZWNlaXZlciA9PT0gbnVsbCB8fCAodHlwZW9mIHJlY2VpdmVyICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiByZWNlaXZlciAhPT0gXCJmdW5jdGlvblwiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB1c2UgJ2luJyBvcGVyYXRvciBvbiBub24tb2JqZWN0XCIpO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgPT09IHN0YXRlIDogc3RhdGUuaGFzKHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYWRkRGlzcG9zYWJsZVJlc291cmNlKGVudiwgdmFsdWUsIGFzeW5jKSB7XHJcbiAgICBpZiAodmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHZvaWQgMCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWQuXCIpO1xyXG4gICAgICAgIHZhciBkaXNwb3NlO1xyXG4gICAgICAgIGlmIChhc3luYykge1xyXG4gICAgICAgICAgICBpZiAoIVN5bWJvbC5hc3luY0Rpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNEaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgICAgICAgICAgZGlzcG9zZSA9IHZhbHVlW1N5bWJvbC5hc3luY0Rpc3Bvc2VdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGlzcG9zZSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIGlmICghU3ltYm9sLmRpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuZGlzcG9zZSBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICAgICAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuZGlzcG9zZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgZGlzcG9zZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IG5vdCBkaXNwb3NhYmxlLlwiKTtcclxuICAgICAgICBlbnYuc3RhY2sucHVzaCh7IHZhbHVlOiB2YWx1ZSwgZGlzcG9zZTogZGlzcG9zZSwgYXN5bmM6IGFzeW5jIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXN5bmMpIHtcclxuICAgICAgICBlbnYuc3RhY2sucHVzaCh7IGFzeW5jOiB0cnVlIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcblxyXG52YXIgX1N1cHByZXNzZWRFcnJvciA9IHR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPT09IFwiZnVuY3Rpb25cIiA/IFN1cHByZXNzZWRFcnJvciA6IGZ1bmN0aW9uIChlcnJvciwgc3VwcHJlc3NlZCwgbWVzc2FnZSkge1xyXG4gICAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbiAgICByZXR1cm4gZS5uYW1lID0gXCJTdXBwcmVzc2VkRXJyb3JcIiwgZS5lcnJvciA9IGVycm9yLCBlLnN1cHByZXNzZWQgPSBzdXBwcmVzc2VkLCBlO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGlzcG9zZVJlc291cmNlcyhlbnYpIHtcclxuICAgIGZ1bmN0aW9uIGZhaWwoZSkge1xyXG4gICAgICAgIGVudi5lcnJvciA9IGVudi5oYXNFcnJvciA/IG5ldyBfU3VwcHJlc3NlZEVycm9yKGUsIGVudi5lcnJvciwgXCJBbiBlcnJvciB3YXMgc3VwcHJlc3NlZCBkdXJpbmcgZGlzcG9zYWwuXCIpIDogZTtcclxuICAgICAgICBlbnYuaGFzRXJyb3IgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gbmV4dCgpIHtcclxuICAgICAgICB3aGlsZSAoZW52LnN0YWNrLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgcmVjID0gZW52LnN0YWNrLnBvcCgpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlYy5kaXNwb3NlICYmIHJlYy5kaXNwb3NlLmNhbGwocmVjLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZWMuYXN5bmMpIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKG5leHQsIGZ1bmN0aW9uKGUpIHsgZmFpbChlKTsgcmV0dXJuIG5leHQoKTsgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGZhaWwoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVudi5oYXNFcnJvcikgdGhyb3cgZW52LmVycm9yO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5leHQoKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgX19leHRlbmRzOiBfX2V4dGVuZHMsXHJcbiAgICBfX2Fzc2lnbjogX19hc3NpZ24sXHJcbiAgICBfX3Jlc3Q6IF9fcmVzdCxcclxuICAgIF9fZGVjb3JhdGU6IF9fZGVjb3JhdGUsXHJcbiAgICBfX3BhcmFtOiBfX3BhcmFtLFxyXG4gICAgX19tZXRhZGF0YTogX19tZXRhZGF0YSxcclxuICAgIF9fYXdhaXRlcjogX19hd2FpdGVyLFxyXG4gICAgX19nZW5lcmF0b3I6IF9fZ2VuZXJhdG9yLFxyXG4gICAgX19jcmVhdGVCaW5kaW5nOiBfX2NyZWF0ZUJpbmRpbmcsXHJcbiAgICBfX2V4cG9ydFN0YXI6IF9fZXhwb3J0U3RhcixcclxuICAgIF9fdmFsdWVzOiBfX3ZhbHVlcyxcclxuICAgIF9fcmVhZDogX19yZWFkLFxyXG4gICAgX19zcHJlYWQ6IF9fc3ByZWFkLFxyXG4gICAgX19zcHJlYWRBcnJheXM6IF9fc3ByZWFkQXJyYXlzLFxyXG4gICAgX19zcHJlYWRBcnJheTogX19zcHJlYWRBcnJheSxcclxuICAgIF9fYXdhaXQ6IF9fYXdhaXQsXHJcbiAgICBfX2FzeW5jR2VuZXJhdG9yOiBfX2FzeW5jR2VuZXJhdG9yLFxyXG4gICAgX19hc3luY0RlbGVnYXRvcjogX19hc3luY0RlbGVnYXRvcixcclxuICAgIF9fYXN5bmNWYWx1ZXM6IF9fYXN5bmNWYWx1ZXMsXHJcbiAgICBfX21ha2VUZW1wbGF0ZU9iamVjdDogX19tYWtlVGVtcGxhdGVPYmplY3QsXHJcbiAgICBfX2ltcG9ydFN0YXI6IF9faW1wb3J0U3RhcixcclxuICAgIF9faW1wb3J0RGVmYXVsdDogX19pbXBvcnREZWZhdWx0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldDogX19jbGFzc1ByaXZhdGVGaWVsZEdldCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQ6IF9fY2xhc3NQcml2YXRlRmllbGRTZXQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkSW46IF9fY2xhc3NQcml2YXRlRmllbGRJbixcclxuICAgIF9fYWRkRGlzcG9zYWJsZVJlc291cmNlOiBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZSxcclxuICAgIF9fZGlzcG9zZVJlc291cmNlczogX19kaXNwb3NlUmVzb3VyY2VzLFxyXG59O1xyXG4iLCJpbXBvcnQgaTE4biBmcm9tICdpMThuLWpzJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7ZW5VUywgZXNFUywgZm9ybWF0LCBwYXJzZUlTTywgTG9jYWxlfSBmcm9tICdkYXRlLWZucyc7XG5cbmltcG9ydCBFUyBmcm9tICcuLi9sYW5nL2VzRVMuanNvbic7XG5pbXBvcnQgRU4gZnJvbSAnLi4vbGFuZy9lblVTLmpzb24nO1xuXG5pbnRlcmZhY2UgVHJhbnNsYXRpb25zIHtcbiAgW2tleTogc3RyaW5nXTogdHlwZW9mIEVOIHwgdHlwZW9mIEVTO1xufVxuXG5pbnRlcmZhY2UgTG9jYWxlTW9kdWxlIHtcbiAgY3VycmVudERhdGVMb2NhbGU6IExvY2FsZSB8IG51bGw7XG4gIGkxOG46IHR5cGVvZiBpMThuO1xuICBpbml0OiAoKSA9PiB2b2lkO1xuICB0OiAoa2V5OiBzdHJpbmcsIHBhcmFtcz86IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSA9PiBzdHJpbmc7XG4gIHNldEN1cnJlbnRMYW5ndWFnZTogKGlucHV0OiBzdHJpbmcpID0+IHZvaWQ7XG4gIGZvcm1hdERhdGU6IChkYXRlOiBEYXRlIHwgbnVtYmVyLCBmb3JtYXRTdHI6IHN0cmluZykgPT4gc3RyaW5nO1xuICBwYXJzZUlTT0RhdGU6IChkYXRlOiBzdHJpbmcpID0+IERhdGU7XG4gIGdldERldmljZUxvY2FsZTogKCkgPT4gc3RyaW5nO1xuICBnZXREZXZpY2VMb2NhbGVGb3JEYXRlOiAoKSA9PiBMb2NhbGU7XG4gIGZvcm1hdExhbmd1YWdlVW5kZXJzY29yZTogKGxhbmd1YWdlOiBzdHJpbmcsIGRhc2g/OiBib29sZWFuKSA9PiBzdHJpbmc7XG4gIGdldExhbmd1YWdlTmFtZTogKGxhbmd1YWdlOiBzdHJpbmcpID0+IHN0cmluZyB8IG51bGw7XG4gIGxhbmd1YWdlQnlEZWZhdWx0OiAoKSA9PiBzdHJpbmc7XG59XG5cbmNvbnN0IHN1cHBvcnRlZExvY2FsZXM6IFRyYW5zbGF0aW9ucyA9IHtcbiAgJ2VuLVVTJzogRU4sXG4gICdlcy1FUyc6IEVTLFxufTtcblxuY29uc3QgTG9jYWxpemF0aW9uID0ge1xuICBsb2NhbGU6ICdlbi1VUycsXG59O1xuXG5jb25zdCBmYWxsYmFja0xhbmd1YWdlID0gJ2VuLVVTJztcbmNvbnN0IGZhbGxiYWNrRGF0ZUxvY2FsZSA9IGVuVVM7XG5jb25zdCBkYXRlTG9jYWxlczogUmVjb3JkPHN0cmluZywgTG9jYWxlPiA9IHtlblVTLCBlc0VTfTtcblxuY29uc3QgbG9jYWxlOiBMb2NhbGVNb2R1bGUgPSB7XG4gIGN1cnJlbnREYXRlTG9jYWxlOiBudWxsLFxuXG4gIGkxOG4sXG4gIGluaXQoKSB7XG4gICAgaTE4bi5sb2NhbGUgPSAnZW4tVVMnO1xuICAgIGkxOG4uZmFsbGJhY2tzID0gdHJ1ZTtcbiAgICBpMThuLmRlZmF1bHRMb2NhbGUgPSBmYWxsYmFja0xhbmd1YWdlO1xuICAgIGkxOG4udHJhbnNsYXRpb25zID0gc3VwcG9ydGVkTG9jYWxlcztcblxuICAgIGlmIChzdXBwb3J0ZWRMb2NhbGVzW0xvY2FsaXphdGlvbi5sb2NhbGVdKSB7XG4gICAgICBpMThuLnRyYW5zbGF0aW9uc1tMb2NhbGl6YXRpb24ubG9jYWxlXSA9XG4gICAgICAgIHN1cHBvcnRlZExvY2FsZXNbTG9jYWxpemF0aW9uLmxvY2FsZV07XG4gICAgICB0aGlzLmN1cnJlbnREYXRlTG9jYWxlID1cbiAgICAgICAgZGF0ZUxvY2FsZXNbTG9jYWxpemF0aW9uLmxvY2FsZS5yZXBsYWNlKCctJywgJycpXSB8fCBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBpMThuLnRyYW5zbGF0aW9uc1tmYWxsYmFja0xhbmd1YWdlXSA9IHN1cHBvcnRlZExvY2FsZXNbZmFsbGJhY2tMYW5ndWFnZV07XG4gICAgICB0aGlzLmN1cnJlbnREYXRlTG9jYWxlID0gZmFsbGJhY2tEYXRlTG9jYWxlO1xuICAgIH1cbiAgfSxcblxuICB0KGtleSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGkxOG4udChrZXksIHBhcmFtcyk7XG4gIH0sXG5cbiAgc2V0Q3VycmVudExhbmd1YWdlKGlucHV0KSB7XG4gICAgY29uc3QgbmV3TG9jYWwgPSBpbnB1dC5yZXBsYWNlKCdfJywgJy0nKTtcbiAgICBpMThuLmxvY2FsZSA9IG5ld0xvY2FsO1xuICAgIGkxOG4udHJhbnNsYXRpb25zID0ge307XG4gICAgaWYgKHN1cHBvcnRlZExvY2FsZXNbbmV3TG9jYWxdKSB7XG4gICAgICBpMThuLnRyYW5zbGF0aW9uc1tuZXdMb2NhbF0gPSBzdXBwb3J0ZWRMb2NhbGVzW25ld0xvY2FsXTtcbiAgICB9XG4gIH0sXG5cbiAgZm9ybWF0RGF0ZShkYXRlLCBmb3JtYXRTdHIpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGZvcm1hdChkYXRlLCBmb3JtYXRTdHIsIHtsb2NhbGU6IHRoaXMuZ2V0RGV2aWNlTG9jYWxlRm9yRGF0ZSgpfSk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgJHtlcnJvci5tZXNzYWdlfSAtIFBhcmFtczogRGF0ZTogJHtkYXRlfSAtIEZvcm1hdCBTdHJpbmc6ICR7Zm9ybWF0U3RyfWAsXG4gICAgICApO1xuICAgIH1cbiAgfSxcblxuICBwYXJzZUlTT0RhdGUoZGF0ZSkge1xuICAgIHJldHVybiBwYXJzZUlTTyhkYXRlKTtcbiAgfSxcblxuICBnZXREZXZpY2VMb2NhbGUoKSB7XG4gICAgaWYgKHN1cHBvcnRlZExvY2FsZXNbTG9jYWxpemF0aW9uLmxvY2FsZV0pIHtcbiAgICAgIHJldHVybiBpMThuLmxvY2FsZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbGxiYWNrTGFuZ3VhZ2U7XG4gICAgfVxuICB9LFxuXG4gIGdldERldmljZUxvY2FsZUZvckRhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudERhdGVMb2NhbGUgfHwgZmFsbGJhY2tEYXRlTG9jYWxlO1xuICB9LFxuXG4gIGZvcm1hdExhbmd1YWdlVW5kZXJzY29yZShsYW5ndWFnZSwgZGFzaCkge1xuICAgIHN3aXRjaCAobGFuZ3VhZ2UpIHtcbiAgICAgIGNhc2UgJ2VuJzpcbiAgICAgIGNhc2UgJ2VuLVVTJzpcbiAgICAgIGNhc2UgJ2VuX1VTJzpcbiAgICAgICAgcmV0dXJuIGRhc2ggPyAnZW4tVVMnIDogJ2VuX1VTJztcbiAgICAgIGNhc2UgJ2VzJzpcbiAgICAgIGNhc2UgJ2VzLUVTJzpcbiAgICAgIGNhc2UgJ2VzX0VTJzpcbiAgICAgICAgcmV0dXJuIGRhc2ggPyAnZXMtRVMnIDogJ2VzX0VTJztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBkYXNoID8gJ2VuLVVTJyA6ICdlbl9VUyc7XG4gICAgfVxuICB9LFxuXG4gIGdldExhbmd1YWdlTmFtZShsYW5ndWFnZSkge1xuICAgIGNvbnN0IGZvcm1hdHRlZExhbmd1YWdlID0gdGhpcy5mb3JtYXRMYW5ndWFnZVVuZGVyc2NvcmUobGFuZ3VhZ2UsIHRydWUpO1xuICAgIHJldHVybiBzdXBwb3J0ZWRMb2NhbGVzW2Zvcm1hdHRlZExhbmd1YWdlXSA/IGZvcm1hdHRlZExhbmd1YWdlIDogbnVsbDtcbiAgfSxcblxuICBsYW5ndWFnZUJ5RGVmYXVsdCgpIHtcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRMYW5ndWFnZVVuZGVyc2NvcmUoJycsIHRydWUpO1xuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgbG9jYWxlO1xuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICBWaWV3LFxuICBUZXh0LFxuICBJbWFnZSxcbiAgRGltZW5zaW9ucyxcbiAgU2Nyb2xsVmlldyxcbiAgVG91Y2hhYmxlT3BhY2l0eSxcbiAgU3R5bGVTaGVldCxcbn0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCBQZGYgZnJvbSAncmVhY3QtbmF0aXZlLXBkZic7XG5pbXBvcnQgU291bmQgZnJvbSAncmVhY3QtbmF0aXZlLXNvdW5kJztcbmltcG9ydCBSTkZTIGZyb20gJ3JlYWN0LW5hdGl2ZS1mcyc7XG5cbmNvbnN0IEhvbWUgPSAoeyBuYXZpZ2F0aW9uQ29udGFpbmVyLCBzaGFyZWRGaWxlcyB9OiBhbnkpID0+IHtcbiAgY29uc3QgW2F1ZGlvUGxheWVyLCBzZXRBdWRpb1BsYXllcl0gPSB1c2VTdGF0ZTxTb3VuZCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNQbGF5aW5nLCBzZXRJc1BsYXlpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdGV4dENvbnRlbnQsIHNldFRleHRDb250ZW50XSA9IHVzZVN0YXRlKCcnKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFNpIGhheSB1biBhcmNoaXZvIGRlIHRleHRvLCBsZWVtb3Mgc3UgY29udGVuaWRvXG4gICAgaWYgKHNoYXJlZEZpbGVzICYmIHNoYXJlZEZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGZpbGUgPSBzaGFyZWRGaWxlc1swXTsgLy8gVG9tYW1vcyBlbCBwcmltZXIgYXJjaGl2byBjb21wYXJ0aWRvXG4gICAgICBpZiAoZmlsZS5maWxlTWltZVR5cGUuc3RhcnRzV2l0aCgndGV4dC8nKSkge1xuICAgICAgICBSTkZTLnJlYWRGaWxlKGZpbGUuZmlsZVBhdGgsICd1dGY4JylcbiAgICAgICAgICAudGhlbigoY29udGVudCkgPT4ge1xuICAgICAgICAgICAgc2V0VGV4dENvbnRlbnQoY29udGVudCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgYWwgbGVlciBlbCBhcmNoaXZvIGRlIHRleHRvOicsIGVycm9yKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDbGVhbnVwIG9uIHVubW91bnRcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGF1ZGlvUGxheWVyKSB7XG4gICAgICAgIGF1ZGlvUGxheWVyLnJlbGVhc2UoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbc2hhcmVkRmlsZXNdKTtcblxuICBjb25zdCBwbGF5QXVkaW8gPSAoZmlsZVBhdGg6IHN0cmluZykgPT4ge1xuICAgIGlmIChhdWRpb1BsYXllcikge1xuICAgICAgLy8gUmVzdW1lIGlmIGFscmVhZHkgbG9hZGVkXG4gICAgICBhdWRpb1BsYXllci5wbGF5KChzdWNjZXNzOiBib29sZWFuKSA9PiB7XG4gICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1JlcHJvZHVjY2nDs24gY29tcGxldGFkYScpO1xuICAgICAgICAgIHNldElzUGxheWluZyhmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGVuIGxhIHJlcHJvZHVjY2nDs24nKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBzZXRJc1BsYXlpbmcodHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIExvYWQgYW5kIHBsYXkgbmV3IGF1ZGlvXG4gICAgICBjb25zdCBzb3VuZCA9IG5ldyBTb3VuZChmaWxlUGF0aCwgJycsIChlcnJvcikgPT4ge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgYWwgY2FyZ2FyIGVsIHNvbmlkbzonLCBlcnJvcik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNvdW5kLnBsYXkoKHN1Y2Nlc3M6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlcHJvZHVjY2nDs24gY29tcGxldGFkYScpO1xuICAgICAgICAgICAgc2V0SXNQbGF5aW5nKGZhbHNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGVuIGxhIHJlcHJvZHVjY2nDs24nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRJc1BsYXlpbmcodHJ1ZSk7XG4gICAgICB9KTtcbiAgICAgIHNldEF1ZGlvUGxheWVyKHNvdW5kKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcGF1c2VBdWRpbyA9ICgpID0+IHtcbiAgICBpZiAoYXVkaW9QbGF5ZXIpIHtcbiAgICAgIGF1ZGlvUGxheWVyLnBhdXNlKCk7XG4gICAgICBzZXRJc1BsYXlpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCB0b2dnbGVBdWRpb1BsYXliYWNrID0gKGZpbGVQYXRoOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoaXNQbGF5aW5nKSB7XG4gICAgICBwYXVzZUF1ZGlvKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBsYXlBdWRpbyhmaWxlUGF0aCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlbmRlckZpbGVDb250ZW50ID0gKGZpbGU6IGFueSkgPT4ge1xuICAgIGlmIChmaWxlLmZpbGVNaW1lVHlwZSA9PT0gJ2FwcGxpY2F0aW9uL3BkZicpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxQZGZcbiAgICAgICAgICBzb3VyY2U9e3sgdXJpOiBmaWxlLmZpbGVQYXRoIH19XG4gICAgICAgICAgc3R5bGU9e3N0eWxlcy5wZGZ9XG4gICAgICAgICAgb25FcnJvcj17KGVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChmaWxlLmZpbGVNaW1lVHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPEltYWdlXG4gICAgICAgICAgc291cmNlPXt7IHVyaTogZmlsZS5maWxlUGF0aCB9fVxuICAgICAgICAgIHN0eWxlPXtzdHlsZXMuaW1hZ2V9XG4gICAgICAgICAgcmVzaXplTW9kZT1cImNvbnRhaW5cIlxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGZpbGUuZmlsZU1pbWVUeXBlLnN0YXJ0c1dpdGgoJ2F1ZGlvLycpKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLmF1ZGlvQ29udGFpbmVyfT5cbiAgICAgICAgICA8VG91Y2hhYmxlT3BhY2l0eVxuICAgICAgICAgICAgc3R5bGU9e3N0eWxlcy5hdWRpb0J1dHRvbn1cbiAgICAgICAgICAgIG9uUHJlc3M9eygpID0+IHRvZ2dsZUF1ZGlvUGxheWJhY2soZmlsZS5maWxlUGF0aCl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFRleHQgc3R5bGU9e3N0eWxlcy5hdWRpb0J1dHRvblRleHR9PlxuICAgICAgICAgICAgICB7aXNQbGF5aW5nID8gJ1BhdXNhciBBdWRpbycgOiAnUmVwcm9kdWNpciBBdWRpbyd9XG4gICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgPC9Ub3VjaGFibGVPcGFjaXR5PlxuICAgICAgICA8L1ZpZXc+XG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoZmlsZS5maWxlTWltZVR5cGUuc3RhcnRzV2l0aCgndGV4dC8nKSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFNjcm9sbFZpZXcgc3R5bGU9e3N0eWxlcy50ZXh0Q29udGFpbmVyfT5cbiAgICAgICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLnRleHRDb250ZW50fT57dGV4dENvbnRlbnR9PC9UZXh0PlxuICAgICAgICA8L1Njcm9sbFZpZXc+XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLnVuc3VwcG9ydGVkQ29udGFpbmVyfT5cbiAgICAgICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLnVuc3VwcG9ydGVkVGV4dH0+XG4gICAgICAgICAgICBUaXBvIGRlIGFyY2hpdm8gbm8gc29wb3J0YWRvIGRpcmVjdGFtZW50ZS5cbiAgICAgICAgICA8L1RleHQ+XG4gICAgICAgIDwvVmlldz5cbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5jb250YWluZXJ9PlxuICAgICAge3NoYXJlZEZpbGVzICYmIHNoYXJlZEZpbGVzLmxlbmd0aCA+IDAgPyAoXG4gICAgICAgIHNoYXJlZEZpbGVzLm1hcCgoZmlsZTogYW55LCBpbmRleDogYW55KSA9PiAoXG4gICAgICAgICAgPFZpZXcga2V5PXtpbmRleH0gc3R5bGU9e3N0eWxlcy5maWxlQ29udGFpbmVyfT5cbiAgICAgICAgICAgIDxUZXh0IHN0eWxlPXtzdHlsZXMuZmlsZU5hbWV9PntmaWxlLmZpbGVOYW1lfTwvVGV4dD5cbiAgICAgICAgICAgIHtyZW5kZXJGaWxlQ29udGVudChmaWxlKX1cbiAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgICkpXG4gICAgICApIDogKFxuICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLm5vRmlsZUNvbnRhaW5lcn0+XG4gICAgICAgICAgPFRleHQgc3R5bGU9e3N0eWxlcy5ub0ZpbGVUZXh0fT5ObyBoYXkgYXJjaGl2b3MgY29tcGFydGlkb3MuPC9UZXh0PlxuICAgICAgICA8L1ZpZXc+XG4gICAgICApfVxuICAgIDwvVmlldz5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEhvbWU7XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgY29udGFpbmVyOiB7XG4gICAgZmxleDogMSxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZjdmN2Y3JyxcbiAgfSxcbiAgZmlsZUNvbnRhaW5lcjoge1xuICAgIGZsZXg6IDEsXG4gICAgbWFyZ2luOiAxMCxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZmZmJyxcbiAgICBib3JkZXJSYWRpdXM6IDgsXG4gICAgcGFkZGluZzogMTAsXG4gICAgZWxldmF0aW9uOiAzLFxuICB9LFxuICBmaWxlTmFtZToge1xuICAgIGZvbnRTaXplOiAxOCxcbiAgICBmb250V2VpZ2h0OiAnYm9sZCcsXG4gICAgbWFyZ2luQm90dG9tOiAxMCxcbiAgICBjb2xvcjogJyMzMzMnLFxuICB9LFxuICBwZGY6IHtcbiAgICBmbGV4OiAxLFxuICAgIHdpZHRoOiBEaW1lbnNpb25zLmdldCgnd2luZG93Jykud2lkdGggLSA0MCxcbiAgICBhbGlnblNlbGY6ICdjZW50ZXInLFxuICB9LFxuICBpbWFnZToge1xuICAgIGZsZXg6IDEsXG4gICAgd2lkdGg6IERpbWVuc2lvbnMuZ2V0KCd3aW5kb3cnKS53aWR0aCAtIDQwLFxuICAgIGhlaWdodDogRGltZW5zaW9ucy5nZXQoJ3dpbmRvdycpLmhlaWdodCAvIDIsXG4gICAgYWxpZ25TZWxmOiAnY2VudGVyJyxcbiAgICBib3JkZXJSYWRpdXM6IDgsXG4gIH0sXG4gIGF1ZGlvQ29udGFpbmVyOiB7XG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgbWFyZ2luVG9wOiAyMCxcbiAgfSxcbiAgYXVkaW9CdXR0b246IHtcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjM2I1OTk4JyxcbiAgICBwYWRkaW5nOiAxNSxcbiAgICBib3JkZXJSYWRpdXM6IDMwLFxuICAgIGVsZXZhdGlvbjogMixcbiAgfSxcbiAgYXVkaW9CdXR0b25UZXh0OiB7XG4gICAgY29sb3I6ICcjZmZmJyxcbiAgICBtYXJnaW5MZWZ0OiAxMCxcbiAgICBmb250U2l6ZTogMTYsXG4gIH0sXG4gIHRleHRDb250YWluZXI6IHtcbiAgICBmbGV4OiAxLFxuICAgIHBhZGRpbmc6IDE1LFxuICAgIGJhY2tncm91bmRDb2xvcjogJyNlZWYyZjMnLFxuICAgIGJvcmRlclJhZGl1czogOCxcbiAgfSxcbiAgdGV4dENvbnRlbnQ6IHtcbiAgICBmb250U2l6ZTogMTYsXG4gICAgbGluZUhlaWdodDogMjQsXG4gICAgY29sb3I6ICcjMzMzJyxcbiAgfSxcbiAgdW5zdXBwb3J0ZWRDb250YWluZXI6IHtcbiAgICBmbGV4OiAxLFxuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICBwYWRkaW5nOiAyMCxcbiAgfSxcbiAgdW5zdXBwb3J0ZWRUZXh0OiB7XG4gICAgZm9udFNpemU6IDE2LFxuICAgIGNvbG9yOiAnZ3JheScsXG4gICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgfSxcbiAgbm9GaWxlQ29udGFpbmVyOiB7XG4gICAgZmxleDogMSxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIH0sXG4gIG5vRmlsZVRleHQ6IHtcbiAgICBmb250U2l6ZTogMTgsXG4gICAgY29sb3I6ICdncmF5JyxcbiAgfSxcbn0pO1xuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNyZWF0ZVN0YWNrTmF2aWdhdG9yIH0gZnJvbSAnQHJlYWN0LW5hdmlnYXRpb24vc3RhY2snO1xuaW1wb3J0IGxvY2FsZSBmcm9tICcuL3NyYy9sb2NhbGl6YXRpb24vbG9jYWxlJztcbmltcG9ydCB7IElEYXRhLCBJTmF2aWdhdGlvbkNvbnRhaW5lclByb3BzIH0gZnJvbSAnLi9zcmMvaW50ZXJmYWNlcyc7XG5pbXBvcnQgSG9tZSBmcm9tICcuL3NyYy9zY3JlZW5zL2hvbWUnO1xuXG5pbnRlcmZhY2UgQXBwUHJvcHMge1xuICBsYW5ndWFnZTogc3RyaW5nO1xuICBkYXRhVXNlcjogSURhdGE7XG4gIG5hdmlnYXRpb25Db250YWluZXI6IElOYXZpZ2F0aW9uQ29udGFpbmVyUHJvcHM7XG4gIHNoYXJlZEZpbGVzOiB1bmtub3duW107XG59XG5cbmNvbnN0IFN0YWNrID0gY3JlYXRlU3RhY2tOYXZpZ2F0b3IoKTtcblxuY29uc3QgQXBwOiBSZWFjdC5GQzxBcHBQcm9wcz4gPSAoe1xuICBsYW5ndWFnZSxcbiAgbmF2aWdhdGlvbkNvbnRhaW5lcixcbiAgZGF0YVVzZXIsXG4gIHNoYXJlZEZpbGVzLFxufSkgPT4ge1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxvY2FsZS5pbml0KCk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxvY2FsZS5zZXRDdXJyZW50TGFuZ3VhZ2UobG9jYWxlLmZvcm1hdExhbmd1YWdlVW5kZXJzY29yZShsYW5ndWFnZSkpO1xuICB9LCBbbGFuZ3VhZ2VdKTtcblxuICByZXR1cm4gKFxuICAgIDxTdGFjay5OYXZpZ2F0b3IgaW5pdGlhbFJvdXRlTmFtZT1cIkhvbWVcIj5cbiAgICAgIDxTdGFjay5TY3JlZW4gbmFtZT1cIkhvbWVcIiBvcHRpb25zPXt7IGhlYWRlclNob3duOiBmYWxzZSB9fT5cbiAgICAgICAge3Byb3BzID0+IChcbiAgICAgICAgICA8SG9tZVxuICAgICAgICAgICAgey4uLnByb3BzfVxuICAgICAgICAgICAgbmF2aWdhdGlvbkNvbnRhaW5lcj17bmF2aWdhdGlvbkNvbnRhaW5lcn1cbiAgICAgICAgICAgIGRhdGFVc2VyPXtkYXRhVXNlcn1cbiAgICAgICAgICAgIHNoYXJlZEZpbGVzPXtzaGFyZWRGaWxlc31cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9TdGFjay5TY3JlZW4+XG4gICAgPC9TdGFjay5OYXZpZ2F0b3I+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBcHA7XG4iXSwibmFtZXMiOlsiZW5VUyIsImVzRVMiLCJpMThuIiwiZm9ybWF0IiwicGFyc2VJU08iLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsIlJORlMiLCJTb3VuZCIsIlJlYWN0IiwiUGRmIiwiSW1hZ2UiLCJWaWV3IiwiVG91Y2hhYmxlT3BhY2l0eSIsIlRleHQiLCJTY3JvbGxWaWV3IiwiU3R5bGVTaGVldCIsIkRpbWVuc2lvbnMiLCJjcmVhdGVTdGFja05hdmlnYXRvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaUJBO0FBQ08sSUFBSSxRQUFRLEdBQUcsV0FBVztBQUNqQyxJQUFJLFFBQVEsR0FBRyxNQUFNLENBQUMsTUFBTSxJQUFJLFNBQVMsUUFBUSxDQUFDLENBQUMsRUFBRTtBQUNyRCxRQUFRLEtBQUssSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdB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
